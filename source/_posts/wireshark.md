---
title: wireshark 抓包    
date: 2021-07-08 00:00:38    
tags:    
    - 网络    
    - 抓包    
categories:    
    - 网络    
    - 抓包
---

### 抓包工具 wireshark


wireshark 是一个免费开源的网络数据包分析软件。网络数据包分析软件的功能是截取网络数据包，并尽可能显示出最为详细的网络数据包资料。

在网络调试、排除故障以及网络安全等方面，tcpdump 是一个非常强大的命令行工具。它能够捕获和分析网络数据包，并将结果输出到控制台或保存为文件。本文将从以下几个方面介绍 tcpdump 的使用教程。

## 安装和启动 tcpdump

tcpdump 是一个免费开源的软件，可以在 Linux 和 macOS 等操作系统上运行。要安装 tcpdump，我们只需要使用对应系统的包管理器即可。例如，在 Ubuntu 中安装 tcpdump 可以使用如下命令：

```
sudo apt-get update
sudo apt-get install tcpdump
```

安装好后，我们就可以在终端中使用 tcpdump 命令了。

## 指定网络接口和抓包过滤条件

在使用 tcpdump 进行抓包前，我们需要指定要监听的网络接口和抓包过滤条件。例如，我们可以使用如下命令来监听 eth0 网络接口并只抓取目的 IP 地址为 10.0.0.1 的数据包：

```
sudo tcpdump -i eth0 dst 10.0.0.1
```

其中 `-i` 参数用于指定要监听的网络接口，`dst` 参数表示指定目的地址，`10.0.0.1` 则表示目的 IP 地址为 10.0.0.1。

## 分析抓取到的数据包

当 tcpdump 开始监听网络接口并抓取数据包时，它会将每个数据包的详细信息输出到控制台。这些信息包括源地址、目的地址、协议类型、序号等。我们可以根据需要添加一些参数来输出更详细的信息。例如，使用 `-v` 参数可以输出更多关于每个数据包的详细信息。

另外，tcpdump 还支持将抓取到的数据包保存为文件，以方便离线分析。例如，使用如下命令将抓取到的数据包保存到 file.pcap 文件中：

```
sudo tcpdump -i eth0 -w file.pcap
```

## 过滤和统计数据包

在抓取到大量数据包后，我们可能需要过滤出某些特定的数据包进行分析。tcpdump 支持使用更复杂的过滤条件来筛选数据包。例如，我们可以使用如下命令来过滤出目标主机为 10.0.0.1，协议类型为 TCP，且目标端口为 80 的数据包：

```
sudo tcpdump -i eth0 'dst host 10.0.0.1 and tcp and dst port 80'
```

此外，tcpdump 还提供了一些选项用于统计抓取到的数据包数量、流量等信息。例如，使用 `-c` 参数可以限制抓取的数据包数量：

```
sudo tcpdump -i eth0 -c 100
```

[Wireshark 官网](https://www.wireshark.org/)

